
<script type="text/javascript">

    $(document).ready(function() {

        getCategories();

        $(this).keydown(function(key) {

                    if (key.keyCode == 8) {

                         var channel = $('a.active');
                        if (channel.length != 0) {

                            var elem = (channel.is("a:last")) ? channel.prev() : channel.next();
                            channel.remove();
                            elem.addClass("active");

                            }

                    }

                        });

    });


    function getCategories() {
        $.ajax({
            url: "@Url.Action("GetCategories")",
            async: true,
            success: function(data) {
                $("#categories").html(data);
                $("#categories > ul > li").each(function() {

                    $(this).click({_self: $(this), title: $(this).children('a').children('span.title').text()}, getChannels);
                });


            }
        });
    }

    function getChannels(event) {

        $('#categories > ul > li').removeClass("active");
        event.data._self.addClass("active");
        $.ajax({
            url: "@Url.Action("GetChannels","Home", new {category = "event.data.title"})",
            async: true,
            success: function(data) {
                $("#channels").html(data);
                $("#channels > a").each(function() {

                    $(this).click({_self: $(this), title: $(this).children('h4').text()}, getItems);
                });


            },

        });
    }

    function getItems(event) {

        $('#channels > a').removeClass("active");
        event.data._self.addClass("active");

        $.ajax({
            url: "@Url.Action("GetItems","Home", new {channel = "event.data.title"})",
            async: true,
            success: function(data) {
                $("#items").html(data);

             },

        });

    }


</script>