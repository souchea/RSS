@using Microsoft.AspNet.Identity

@{
    ViewBag.ApplicationName = "RSS Feed Agregator";
}

<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.ApplicationName</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body class="demo-2">
    <div class="container" style="margin-top: 40px; border: 1px solid rgba(0,0,0,.6); box-shadow: 0 1px 1px rgba(0,0,0,.1)">
        <ul id="gn-menu" class="gn-menu-main">
            <li class="gn-trigger">
                <a class="gn-icon gn-icon-menu"><span>Menu</span></a>
                <nav class="gn-menu-wrapper">
                    <div class="gn-scroller">
                        <ul class="gn-menu">
                            @if (Request.IsAuthenticated)
                            {

                                @*<li>
                                        <a class="gn-icon gn-icon-download">Feed sources (5)</a>
                                        <ul class="gn-submenu">
                                            @foreach (var source in ViewBag.UserFeedSources) {
                                                <li><a class="gn-icon gn-icon-download">@source.Title</a></li>
                                            }
                                        </ul>
                                    </li>*@
                                
                                if (ViewBag.UserCategories != null)
                                {
                                    <li>
                                        <a class="gn-icon gn-icon-archive">Categories (@ViewBag.UserCategories.Count)</a>
                                        <ul class="gn-submenu">
                                            @foreach (var category in ViewBag.UserCategories) {
                                                <li><a class="gn-icon gn-icon-article">@category.Title</a></li>                                                
                                            }
                                        </ul>
                                    </li>
                                    
                                    using (Html.BeginForm("Add category", "Home", FormMethod.Post, new { id = "addCategoryForm" }))
                                    {
                                        <li>
                                            @Html.AntiForgeryToken()
                                            <input type="text" name="category_name" value="">
                                            <input type="hidden" name="type" value="add_category">
                                            <input type="submit" value="Add" />
                                        </li>
                                    }
                                }

                            }
                            else
                            {
                                <a class="gn-icon gn-icon-help">(Login is required)</a>
                            }
                        </ul>
                    </div><!-- /gn-scroller -->
                </nav>
            </li>
            <li>@Html.ActionLink((string)ViewBag.ApplicationName, "Index", "Home")</li>
            <li>@Html.ActionLink("Team", "Team", "Home")</li>
            @Html.Partial("_LoginPartial")
        </ul>
        @RenderBody()
    </div><!-- /container -->
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @Scripts.Render("~/bundles/menu")
    @Scripts.Render("~/bundles/grid")
    @RenderSection("scripts", required: false)

    <script> new gnMenu(document.getElementById('gn-menu')); </script>
    <script> new grid3D(document.getElementById('grid3d')); </script>

</body>
</html>